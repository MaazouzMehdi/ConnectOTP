<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Prepare OpenTripPlanner server</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="ConnectOTP : Workshop"><link rel="up" href="ch02.html" title="Chapter 2. Setting up the project"><link rel="prev" href="ch02s02.html" title="Prepare Database"><link rel="next" href="ch02s04.html" title="Prepare QGIS"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Prepare OpenTripPlanner server</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Setting up the project</th><td width="20%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="prepare_openTripPlanner_server"></a>Prepare OpenTripPlanner server</h2></div></div></div><p>In order to contact the OpenTripPlanner API, we will set up a local web server (for now). The .jar file <code class="varname">otp-2.0.0-shaded.jar</code> is located at the root of the project and corresponds to OpenTripPlanner 2.0 </p><p>When it is executed, it will use the files in otpData/  to create the graph. By default, when the graph is created, the transit network will contain the GTFS data of the Tec and the Stib. If you want to add a GTFS file, please put it in the otpData/  folder and add its name in the build-config.json file like this.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>"gtfs" : "tec-gtfs.zip|stib-gtfs.zip|<code class="varname">my-gtfs.zip</code>"</p></li></ul></div><p>For example if we remove the GTFS file tec-gtfs.zip in our build-config.json we've got    :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>"gtfs" : "stib-gtfs.zip"</p></li></ul></div><p>Please be careful, for OpenTripPlanner 2 to detect a GTFS file, its name must end in .zip and must contain the letters.
                      Now all we have to do is launch our server.</p><pre class="programlisting">
-- at the root of the project:
$ java -Xmx4G -jar otp-2.0.0-shaded.jar   --build --save ./otpData/
        </pre><p>The parameter <code class="varname">-Xmx4G</code> means that you reserve 4GB of memory in order to build the graph containing our OSM and GTFS data from Stib and Tec. If you decide to use only OSM and Stib data, the parameter <code class="varname">-Xmx2G</code> would be sufficient. The parameter<code class="varname">--build</code> means the graph is build and <code class="varname">--save</code> means we store the graph onto disk.
                        To start the server</p><pre class="programlisting">
-- at the root of the project:
$ java -jar otp-2.0.0-shaded.jar   --load --serve ./otpData/
        </pre><p><code class="varname">--load</code>  means we load the graph just built before and <code class="varname">--serve</code> simply means we run  an OTP API server</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Prepare Database </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Prepare QGIS</td></tr></table></div></body></html>
